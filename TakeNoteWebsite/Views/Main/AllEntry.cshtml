@model List<TakeNoteWebsite.Models.Data.Entry>

@{
    ViewData["Title"] = "AllEntry";
}
<link rel="stylesheet" href="~/css/allEntry.css" />
<link rel="stylesheet" href="~/css/filter.css" />

<div class="filterContainer">
    <form class="filter" asp-controller="Main" asp-action="AllEntry" method="get">
        <span class="filterSelectContainer">
            <label for="since" class="filterLabel">Since</label>
            <br />
            <select name="since" onchange="this.form.submit()" class="filterSelect filterSince">
                <option value="N/A">N/A</option>
                <option value="today">Today</option>
                <option value="yesterday">Yesterday</option>
                <option value="thisWeek">This week</option>
                <option value="lastWeek">Last week</option>
                <option value="last7Days">Last 7 days</option>
                <option value="thisMonth">This month</option>
                <option value="lastMonth">Last month</option>
                <option value="thisYear">This year</option>
                <option value="lastYear">Last year</option>
            </select>
        </span>

        <span class="filterSelectContainer">
            <label for="starred" class="filterLabel">Starred</label>
            <br />
            <select id="filterStarred" name="starred" onchange="this.form.submit()" class="filterSelect">
                <option value="N/A">N/A</option>
                <option value="starred">Starred</option>
            </select>
        </span>
        <span class="filterSelectContainer">
            <label for="positiveNegative" class="filterLabel">Positive/Negative</label>
            <br />
            <select id="filterPositiveNegative" name="positiveNegative" onchange="this.form.submit()" class="filterSelect">
                <option value="N/A">N/A</option>
                <option value="P">Positive</option>
                <option value="N">Negative</option>
            </select>
        </span>

        <span class="filterSelectContainer">
            <label for="keyword" class="filterLabel">Keyword</label>
            <br />
            <input id="filterKeyword" type ="text" name="keyword">
        </span>
    </form>
</div>
<div style="margin-top: 20px;">
    <div style="display: flex; flex-direction: row;">
        <div class="entry" style="border-bottom: 0.5px solid gray; box-shadow: 1px 1px 3px 0 #ccc; margin-bottom: 2px;">
            <div><input type="checkbox" disabled="true" style="cursor: auto;"></div>
            <div id="tmp" style="font-weight: bold;">Entry</div>
            <div style="font-weight: bold; color: #4b5363;">Date created</div>
        </div>
        <div style="width: 6%; display: flex; align-items: center; justify-content: center; border-bottom: 0.5px solid rgb(194, 190, 190); border-bottom: 0.5px solid gray; box-shadow: 1px 1px 3px 0 #ccc; margin-bottom: 2px;">
            Delete
        </div>
    </div>
    @for (int i = 0; i < Model.Count; i += 1)
    {
        var content = Model[i].Content;
        var indexOfContent = content.IndexOf("...\">") + 5;
        var indexEndOfContent = content.IndexOf("</div>", indexOfContent);
        content = Model[i].Content.Substring(indexOfContent, indexEndOfContent - indexOfContent);
        <div class="@Model[i].ID" style="display: flex; flex-direction: row;">
            <a class="entry @Model[i].IsPositive" id="@Model[i].ID" asp-action="Entry" asp-route-entryID="@Model[i].ID">
                <div><input type="checkbox" disabled="true" style="cursor: context-menu;" /></div>
                <div style="grid-area: 1/2/2/3">
                    <div>@Model[i].Title</div>
                    @if (content.Length > 55)
                    {
                        content = content.Substring(0, 55) + "...";
                    }
                    @if (content == "")
                    {
                        content = "Empty";
                    }
                    <div class="content">@content</div>
                </div>
                <div>@Model[i].Date</div>
            </a>
            <div class="@Model[i].IsPositive" onclick="delete_entry('@Model[i].ID')" style="width: 6%; display: flex; align-items: center; justify-content: center; border-bottom: 0.5px solid rgb(194, 190, 190);">
                <button type="button" class="btn btn-danger buttonDeleteEntry">
                    <i class="fa-solid fa-trash-can"></i>
                </button>
            </div>
        </div>
    }
</div>
<script>
</script>
